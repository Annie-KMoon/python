<div class="my-5">
    <h1 class="text-center mb-5">{{title}}</h1>
    <div class="row">
        <div class="col-12 col-md-6 col-lg-4">
            <form id="frm">
                <div class="input-group">
                    <input name="query" class="form-control" value="광명">
                    <button class="btn btn-secondary">검색</button>
                </div>
            </form>
            
        </div>
    </div>
    <div id="result" class="mt-4 text-center"></div>
</div>


<script>
    $("#frm").on("submit", function (e) {
        e.preventDefault();
        const query = $("input[name=query]").val().trim();
        if (query === "") {
            alert("검색어를 입력하세요!");
            return;
        }

        $.ajax({
            url: "/weather/data",
            type: "get",
            data: { query },
            success: function (res) {
                if (res.error) {
                    $("#result").text(res.error);
                } else {
                    $("#result").html(`<h3>${res.location}의  ${res.temperature} ${res.weather}입니다.</h3>`);
                }
            },
            error: function () {
                $("#result").text("데이터를 불러오는 중 오류가 발생했습니다.");
            }
        });
    });
</script>